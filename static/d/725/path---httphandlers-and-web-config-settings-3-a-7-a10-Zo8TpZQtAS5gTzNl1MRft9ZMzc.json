{"data":{"site":{"siteMetadata":{"title":"Sean's Blog","author":"Sean Lynch"}},"markdownRemark":{"id":"1f6129b8-4e26-5e24-a94e-46a0c548a978","html":"<p>I figured out what was happening in my <a href=\"http://myheadsexploding.com/archive/2007/09/16/httphandlers-and-directory-authenticationhttpmodules.aspx\" title=\"HttpHandlers and directory authentication/HttpModules\">previous post</a>. It makes a bit more sense now that I have seen it, being able to just stop working on something is handy, basically the Rss feeds don’t do URL rewriting. So the call to /test1/Admin/ModeratedCommentRss.aspx uses the /web.config and would use the /test1/Admin/web.config, but it has no reason to look at the /Admin/web.config. </p>\n<p>Not completely sure how I should change this. Right now I have the ModeratedCommentRss.aspx checking to see if the requestor is an Admin, and if not it calls FormsAuthentication.RedirectToLoginPage(). This works, but I would rather a solution that didn’t involve people needing to know to put the check in.</p>\n<p>I also found this module helpful when I was figuring out where to do the conversion:  </p>\n<blockquote>\n<pre class=\"code\"><font size=\"1\"><span style=\"COLOR: rgb(0,0,255)\">public</span> <span style=\"COLOR: rgb(0,0,255)\">class</span> <span style=\"COLOR: rgb(43,145,175)\">DebugModule</span>:System.Web.</font><font size=\"1\"><span style=\"COLOR: rgb(43,145,175)\">IHttpModule</span>{\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"text\">\n      <pre class=\"language-text\"><code class=\"language-text\">&lt;span style=&quot;COLOR: rgb(0,0,255)&quot;&gt;public&lt;/span&gt; &lt;span style=&quot;COLOR: rgb(43,145,175)&quot;&gt;EventHandler&lt;/span&gt; GetEventhandler(&lt;span style=&quot;COLOR: rgb(0,0,255)&quot;&gt;string&lt;/span&gt; name)\n{\n    &lt;span style=&quot;COLOR: rgb(0,0,255)&quot;&gt;return&lt;/span&gt; &lt;span style=&quot;COLOR: rgb(0,0,255)&quot;&gt;new&lt;/span&gt; &lt;span style=&quot;COLOR: rgb(43,145,175)&quot;&gt;EventHandler&lt;/span&gt;(&lt;span style=&quot;COLOR: rgb(0,0,255)&quot;&gt;delegate&lt;/span&gt;(&lt;span style=&quot;COLOR: rgb(0,0,255)&quot;&gt;object&lt;/span&gt; sender, &lt;span style=&quot;COLOR: rgb(43,145,175)&quot;&gt;EventArgs&lt;/span&gt; e)\n    {\n        &lt;span style=&quot;COLOR: rgb(43,145,175)&quot;&gt;HttpApplication&lt;/span&gt; app = (&lt;span style=&quot;COLOR: rgb(43,145,175)&quot;&gt;HttpApplication&lt;/span&gt;)sender;\n        &lt;span style=&quot;COLOR: rgb(43,145,175)&quot;&gt;HttpContext&lt;/span&gt; context = app.Context;\n        &lt;span style=&quot;COLOR: rgb(0,0,255)&quot;&gt;if&lt;/span&gt; (context != &lt;span style=&quot;COLOR: rgb(0,0,255)&quot;&gt;null&lt;/span&gt;)\n            &lt;span style=&quot;COLOR: rgb(43,145,175)&quot;&gt;Debug&lt;/span&gt;.WriteIf(context.Response.StatusCode == 302, &lt;span style=&quot;COLOR: rgb(163,21,21)&quot;&gt;&quot;Redirecting - &quot;&lt;/span&gt;);\n        &lt;span style=&quot;COLOR: rgb(43,145,175)&quot;&gt;Debug&lt;/span&gt;.WriteLine(name);\n    });\n}\n\n&lt;span style=&quot;COLOR: rgb(0,0,255)&quot;&gt;public&lt;/span&gt; &lt;span style=&quot;COLOR: rgb(0,0,255)&quot;&gt;void&lt;/span&gt; Init(&lt;span style=&quot;COLOR: rgb(43,145,175)&quot;&gt;HttpApplication&lt;/span&gt; app)\n{\n\n    &lt;span style=&quot;COLOR: rgb(43,145,175)&quot;&gt;Debug&lt;/span&gt;.WriteLine(&lt;span style=&quot;COLOR: rgb(163,21,21)&quot;&gt;&quot;---------------------------------&quot;&lt;/span&gt;);\n    &lt;span style=&quot;COLOR: rgb(43,145,175)&quot;&gt;Debug&lt;/span&gt;.WriteLine(&lt;span style=&quot;COLOR: rgb(163,21,21)&quot;&gt;&quot;Module Init&quot;&lt;/span&gt;);\n    &lt;span style=&quot;COLOR: rgb(43,145,175)&quot;&gt;Type&lt;/span&gt; appType = app.GetType();\n    &lt;span style=&quot;COLOR: rgb(43,145,175)&quot;&gt;EventInfo&lt;/span&gt;[] events = appType.GetEvents();\n    &lt;span style=&quot;COLOR: rgb(0,0,255)&quot;&gt;foreach&lt;/span&gt; (&lt;span style=&quot;COLOR: rgb(43,145,175)&quot;&gt;EventInfo&lt;/span&gt; eventInfo &lt;span style=&quot;COLOR: rgb(0,0,255)&quot;&gt;in&lt;/span&gt; events)\n    {\n        eventInfo.AddEventHandler(app, GetEventhandler(eventInfo.Name));\n    }\n}</code></pre>\n      </div>\n<p>}</font></pre></p>\n<p><a href=\"http://11011.net/software/vspaste\"></a>I used that class and a small test web project to figure out how to change the FormsAuthentication over to Basic authentication (seems like mixed authentication should have already been there though). </p>\n<p>Of course shortly after I figured most of it out I saw the link to the MSDN article <a href=\"http://haacked.com/\">Phil Haack</a> had posted for the feature request.</p>","frontmatter":{"title":"HttpHandlers and web.config settings","date":"September 16, 2007"}}},"pageContext":{"slug":"/httphandlers-and-web-config-settings/","previous":{"fields":{"slug":"/blog-alias-recap/"},"frontmatter":{"title":"Blog Alias Recap"}},"next":{"fields":{"slug":"/subtext-admin-rss-feeds/"},"frontmatter":{"title":"Subtext Admin Rss Feeds"}}}}