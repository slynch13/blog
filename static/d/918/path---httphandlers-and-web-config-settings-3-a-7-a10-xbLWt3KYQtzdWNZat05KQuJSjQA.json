{"data":{"site":{"siteMetadata":{"title":"Sean's Blog","author":"Sean Lynch"}},"markdownRemark":{"id":"1f6129b8-4e26-5e24-a94e-46a0c548a978","html":"<p>I figured out what was happening in my <a href=\"http://myheadsexploding.com/archive/2007/09/16/httphandlers-and-directory-authenticationhttpmodules.aspx\" title=\"HttpHandlers and directory authentication/HttpModules\">previous post</a>. It makes a bit more sense now that I have seen it, being able to just stop working on something is handy, basically the Rss feeds don’t do URL rewriting. So the call to /test1/Admin/ModeratedCommentRss.aspx uses the /web.config and would use the /test1/Admin/web.config, but it has no reason to look at the /Admin/web.config. </p>\n<p>Not completely sure how I should change this. Right now I have the ModeratedCommentRss.aspx checking to see if the requestor is an Admin, and if not it calls FormsAuthentication.RedirectToLoginPage(). This works, but I would rather a solution that didn’t involve people needing to know to put the check in.</p>\n<p>I also found this module helpful when I was figuring out where to do the conversion:  </p>\n<blockquote>\n<pre class=\"code\"><font size=\"1\"><span style=\"COLOR: rgb(0,0,255)\">public</span> <span style=\"COLOR: rgb(0,0,255)\">class</span> <span style=\"COLOR: rgb(43,145,175)\">DebugModule</span>:System.Web.</font><font size=\"1\"><span style=\"COLOR: rgb(43,145,175)\">IHttpModule\n</span>{\n  <span style=\"COLOR: rgb(0,0,255)\">public</span> <span style=\"COLOR: rgb(43,145,175)\">EventHandler</span> GetEventhandler(<span style=\"COLOR: rgb(0,0,255)\">string</span> name)\n   {\n       <span style=\"COLOR: rgb(0,0,255)\">return</span> <span style=\"COLOR: rgb(0,0,255)\">new</span> <span style=\"COLOR: rgb(43,145,175)\">EventHandler</span>(<span style=\"COLOR: rgb(0,0,255)\">delegate</span>(<span style=\"COLOR: rgb(0,0,255)\">object</span> sender, <span style=\"COLOR: rgb(43,145,175)\">EventArgs</span> e)\n       {\n           <span style=\"COLOR: rgb(43,145,175)\">HttpApplication</span> app = (<span style=\"COLOR: rgb(43,145,175)\">HttpApplication</span>)sender;\n           <span style=\"COLOR: rgb(43,145,175)\">HttpContext</span> context = app.Context;\n           <span style=\"COLOR: rgb(0,0,255)\">if</span> (context != <span style=\"COLOR: rgb(0,0,255)\">null</span>)\n               <span style=\"COLOR: rgb(43,145,175)\">Debug</span>.WriteIf(context.Response.StatusCode == 302, <span style=\"COLOR: rgb(163,21,21)\">\"Redirecting - \"</span>);\n           <span style=\"COLOR: rgb(43,145,175)\">Debug</span>.WriteLine(name);\n       });\n   }\n\n   <span style=\"COLOR: rgb(0,0,255)\">public</span> <span style=\"COLOR: rgb(0,0,255)\">void</span> Init(<span style=\"COLOR: rgb(43,145,175)\">HttpApplication</span> app)\n   {\n\n       <span style=\"COLOR: rgb(43,145,175)\">Debug</span>.WriteLine(<span style=\"COLOR: rgb(163,21,21)\">\"---------------------------------\"</span>);\n       <span style=\"COLOR: rgb(43,145,175)\">Debug</span>.WriteLine(<span style=\"COLOR: rgb(163,21,21)\">\"Module Init\"</span>);\n       <span style=\"COLOR: rgb(43,145,175)\">Type</span> appType = app.GetType();\n       <span style=\"COLOR: rgb(43,145,175)\">EventInfo</span>[] events = appType.GetEvents();\n       <span style=\"COLOR: rgb(0,0,255)\">foreach</span> (<span style=\"COLOR: rgb(43,145,175)\">EventInfo</span> eventInfo <span style=\"COLOR: rgb(0,0,255)\">in</span> events)\n       {\n           eventInfo.AddEventHandler(app, GetEventhandler(eventInfo.Name));\n       }\n   }\n}</font></pre>\n</blockquote>\n<p><a href=\"http://11011.net/software/vspaste\"></a>I used that class and a small test web project to figure out how to change the FormsAuthentication over to Basic authentication (seems like mixed authentication should have already been there though). </p>\n<p>Of course shortly after I figured most of it out I saw the link to the MSDN article <a href=\"http://haacked.com/\">Phil Haack</a> had posted for the feature request.</p>","frontmatter":{"title":"HttpHandlers and web.config settings","date":"September 16, 2007"}}},"pageContext":{"slug":"/httphandlers-and-web-config-settings/","previous":{"fields":{"slug":"/blog-alias-recap/"},"frontmatter":{"title":"Blog Alias Recap"}},"next":{"fields":{"slug":"/subtext-admin-rss-feeds/"},"frontmatter":{"title":"Subtext Admin Rss Feeds"}}}}